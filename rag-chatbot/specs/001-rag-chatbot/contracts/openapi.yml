openapi: 3.0.0
info:
  title: RAG Chatbot API
  version: 1.0.0
  description: API for the RAG Chatbot embedded in a Docusaurus book.

paths:
  /api/chat/rag:
    post:
      summary: General Book Q&A
      operationId: generalBookQA
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                question:
                  type: string
                  description: The user's question about the book.
              required:
                - question
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  answer:
                    type: string
                    description: The answer generated from the book's content.
                  sources:
                    type: array
                    items:
                      type: string
                    description: A list of source documents or sections that contributed to the answer.
        '400':
          description: Bad Request (e.g., empty question)
        '500':
          description: Internal Server Error

  /api/chat/context-only:
    post:
      summary: Context-Only Q&A
      operationId: contextOnlyQA
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                question:
                  type: string
                  description: The user's question about the selected text.
                context_text:
                  type: string
                  description: The text highlighted by the user.
              required:
                - question
                - context_text
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  answer:
                    type: string
                    description: The answer generated from the provided context. If the answer cannot be found, a standard message is returned.
        '400':
          description: Bad Request (e.g., empty question or context)
        '500':
          description: Internal Server Error
